@import '../../style/animation';
@import '../../style/color';

$indicator-size: (
  small: 16px,
  normal: 24px,
  large: 32px
);

$indicator-cube-parts: (top, -1, -1), (left, 1, -1), (right, -1, 1), (bottom, 1, 1);

.wrapper {
  position: relative;
}

.spinner {
  color: $blue-color;
  font-size: 14px;
  display: inline-block;

  &-in-wrapper {
    position: absolute;
    height: 100%;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    background: rgba(white, 0.5);
  }

  &-in-fullscreen {
    height: 100vh;
  }

  &-message {
    margin-top: 8px;
    color: black;
  }

  &-wrapper {
    transition: all 0.3s ease-in-out;
    overflow: hidden;

    &-enter,
    &-appear {
      opacity: 0;

      &-active {
        opacity: 1;
      }
    }

    &-leave {
      opacity: 1;

      &-active {
        opacity: 0;
      }
    }
  }
}

.indicator {
  vertical-align: middle;

  &-tip {
    margin-left: 8px;
    vertical-align: middle;
  }

  // builtin indicator
  &-circle {
    display: inline-block;
    width: map_get($indicator-size, small);
    height: map_get($indicator-size, small);
    border-radius: 50%;
    border: 2px solid $blue-color;
    border-right-color: transparent;
    animation: rotate-linear 2s linear infinite;
    vertical-align: middle;

    @each $sizeName, $size in $indicator-size {
      &--#{$sizeName} {
        width: $size;
        height: $size;
      }
    }
  }

  // builtin indicator
  &-cube {
    display: inline-block;
    height: map_get($indicator-size, large);
    width: map_get($indicator-size, large);
    transform: rotate(45deg);
    padding: 24px;
    box-sizing: content-box;
    vertical-align: middle;

    &-piece {
      float: left;
      width: 50%;
      height: 50%;
      background: $blue-color;
      transform-origin: center;
      animation: ease-in-out 2s infinite;

      @each $p, $x, $y in $indicator-cube-parts {
        &--#{$p} {
          animation-name: indicator-cube-piece-#{$p}-move;
        }

        @keyframes indicator-cube-piece-#{$p}-move {
          0% {
            transform: translate(0, 0);
          }
          25% {
            transform: translate($x * 6px, $y * 6px) rotateZ(0deg);
          }
          50% {
            transform: translate($x * 12px, $y * 12px) rotateZ(90deg);
          }
          75% {
            transform: translate($x * 6px, $y * 6px) rotateZ(180deg);
          }
          100% {
            transform: translate(0, 0) rotateZ(180deg);
          }
        }
      }
    }
  }
}
